# Nodegrid Network Settings:  (CHANGE)
nodegrid_hostname: ng-gatesr1

# Nodegrid Network Connections:  (REQUIRED)
network_connections:
# Bridge Connections  
- name: MGMT0
  type: bridge # analog_modem, bonding, bridge, ethernet, loopback, mobile_broadband_gsm, pppoe, vlan, wifi
  description: 'MGMT PORT' 
  bridge_interfaces: lo1
  enable_lldp: 'no'
  bridge_mac_configuration: bridge_custom_mac
  enable_spanning_tree_protocol: "no"
  ipv4_mode: static # dhcp no_ipv4_address static
  ipv4_address: 192.168.11.1
  ipv4_bitmask: 24
  ipv4_default_route_metric: 425
  ipv4_ignore_obtained_default_gateway: 'no'
  ipv4_ignore_obtained_dns_server: 'no'
  ipv6_mode: no_ipv6_address
  ipv6_ignore_obtained_default_gateway: 'no'
  ipv6_ignore_obtained_dns_server: 'no'
- name: MGMT1
  type: bridge # analog_modem, bonding, bridge, ethernet, loopback, mobile_broadband_gsm, pppoe, vlan, wifi
  description: 'MGMT lanbrd' 
  bridge_interfaces: backplane1.254
  enable_lldp: 'no'
  bridge_mac_configuration: bridge_custom_mac
  enable_spanning_tree_protocol: "no"
  ipv4_mode: static # dhcp no_ipv4_address static
  ipv4_address: 192.168.10.1
  ipv4_bitmask: 24
  ipv4_ignore_obtained_default_gateway: 'no'
  ipv4_ignore_obtained_dns_server: 'no'
  ipv6_mode: no_ipv6_address
  ipv6_ignore_obtained_default_gateway: 'no'
  ipv6_ignore_obtained_dns_server: 'no'
- name: LAN0
  type: bridge
  ipv4_mode: no_ipv4_address # dhcp no_ipv4_address static
  description: 'LAN' 
  bridge_interfaces: backplane0.2
  enable_lldp: "no"
  enable_spanning_tree_protocol: "no"
- name: WAN0
  type: bridge
  ipv4_mode: no_ipv4_address # dhcp no_ipv4_address static
  description: 'wan0 bridge' 
  bridge_interfaces: lo1
  enable_lldp: "no"
  enable_spanning_tree_protocol: "no"
- name: WAN1
  type: bridge
  ipv4_mode: no_ipv4_address # dhcp no_ipv4_address static
  description: "wan1 bridge"
  bridge_interfaces: lo1
  enable_lldp: "no"
  enable_spanning_tree_protocol: "no"
- name: WAN2
  type: bridge
  ipv4_mode: no_ipv4_address # dhcp no_ipv4_address static
  description: "wan2 bridge"
  bridge_interfaces: lo1
  enable_lldp: "no"
  enable_spanning_tree_protocol: "no"
- name: VLAN1001
  type: vlan
  ethernet_interface: eth0
  vlan_id: 1001
  description: "vlan1001"
  set_as_primary_connection: 'no'
  block_unsolicited_incoming_packets: 'no'
  #ethernet_link_mode: auto  # not editable
  ipv4_mode: dhcp # dhcp no_ipv4_address static
  enable_ip_passthrough: "yes"
  ethernet_connection: WAN0
- name: VLAN2002
  type: vlan
  ethernet_interface: eth0
  vlan_id: 2002
  description: "vlan2002"
  set_as_primary_connection: 'no'
  block_unsolicited_incoming_packets: 'no'
  #ethernet_link_mode: auto  # not editable
  ipv4_mode: dhcp # dhcp no_ipv4_address static
  enable_ip_passthrough: "yes"
  ethernet_connection: WAN1
- name: CELLULAR-A
  type: mobile_broadband_gsm
  description: "cellular A"
  connect_automatically: "yes"
  ethernet_interface: cdc-wdm0
  set_as_primary_connection: "no"
  enable_lldp: "no"
  block_unsolicited_incoming_packets: "yes"
  configure_hostname_through_dhcp: "no"
  ipv4_mode: dhcp # dhcp no_ipv4_address static
  ipv4_default_route_metric: 700
  ipv4_ignore_obtained_default_gateway: "no"
  ipv4_ignore_obtained_dns_server: "no"
  enable_ip_passthrough: "yes"
  ethernet_connection: WAN2
- name: SFP0
  type: ethernet
  description: "wan1"
  connect_automatically: "yes"
  ethernet_interface: sfp0
  set_as_primary_connection: "no"
  enable_lldp: "no"
  block_unsolicited_incoming_packets: "no"
  configure_hostname_through_dhcp: "no"
  ethernet_link_mode: auto
  ipv4_mode: dhcp # dhcp no_ipv4_address static
  ipv4_dns_server: ""
  ipv4_dns_search: ""
  ipv4_default_route_metric: 100
  ipv4_ignore_obtained_default_gateway: "no"
  ipv4_ignore_obtained_dns_server: "no"
  ipv6_mode: no_ipv6_address
  ipv6_dns_server:
  ipv6_dns_search:
  ipv6_default_route_metric: 100
  ipv6_ignore_obtained_default_gateway: "no"
  ipv6_ignore_obtained_dns_server: "no"
  enable_ip_passthrough: "no"
    #  ethernet_connection: WAN0
- name: SFP1
  type: ethernet
  description: "wan2"
  connect_automatically: "yes"
  ethernet_interface: sfp1
  set_as_primary_connection: "no"
  enable_lldp: "no"
  block_unsolicited_incoming_packets: "no"
  configure_hostname_through_dhcp: "no"
  ethernet_link_mode: auto
  ipv4_mode: dhcp # dhcp no_ipv4_address static
  ipv4_dns_server: ""
  ipv4_dns_search: ""
  ipv4_default_route_metric: 100
  ipv4_ignore_obtained_default_gateway: "no"
  ipv4_ignore_obtained_dns_server: "no"
  ipv6_mode: no_ipv6_address
  ipv6_dns_server:
  ipv6_dns_search:
  ipv6_default_route_metric: 100
  ipv6_ignore_obtained_default_gateway: "no"
  ipv6_ignore_obtained_dns_server: "no"
  enable_ip_passthrough: "no"
#  ethernet_connection: WAN1

switch:
  vlans:
    - vlan: '1'
      tagged_ports: "" # comma separated list
      untagged_ports: "netS6" # comma separated list
    - vlan: '2'
      tagged_ports: "backplane0"
      untagged_ports: "netS1,netS2,netS3,netS4,netS5"
    - vlan: '200'
      tagged_ports: "backplane1"
      untagged_ports: "netS7"
    - vlan: '254'
      tagged_ports: "backplane1"
      untagged_ports: "netS8"

  interfaces:
    - interface: 'netS1'
      speed: 'auto'
      port_vlan_id: '1'
      description: ''

  backplane:
    backplane0_port_vlan_id: '1'
    backplane1_port_vlan_id: '200'
  
virtual_machines:
  - name: nexGenFW
    ram:  
      size: 2048 # size in MB
    cpu:
      count: 2
    disks:
        # VM disk file name on target device (used in the KVM domain)
      - file_name : vmansible.qcow2 
        # VM disk file source (e.g., URL or file path in the target node or control node)
        file_source: /var/local/file_manager/remote_file_system/extended_storage/Shared/files/ECV-9.2.4.0_94654-original.qcow2 
        file_cache_name: ECV-9.2.4.0_94654-original.qcow2
        type: copy_local_file
        # Defines how to get the disk:
        #  - local_file: it does not copy any disk file. It assumes that the 'file' path exists.
        #  - url: URL to download the qcow2 file and saves it to the 'file' path
        #  - copy_local_file: copies the file 'file_source' to the 'file' path (both paths are in the target node)
        #  - copy_file_to_remote: copies the local file 'file_source' to the target node path 'file'
    network_bridges:
      - MGMT0
      - WAN0
        #      - WAN1
      - WAN2
      - LAN0

  - name: debianVM
    ram:  
      size: 2048 # size in MB
    cpu:
      count: 2
    disks:
      - file_name: debian.qcow2 
        file_source: https://cdimage.debian.org/cdimage/cloud/sid/daily/latest/debian-sid-generic-amd64-daily.qcow2
        file_cache_name: debian-sid-generic-amd64-daily.qcow2
        type: url 
    network_bridges:
      - MGMT0
        #      - WAN0
      - WAN1
    cloud_init:
      iso_file: seed2.iso
      user_data_file: cloud_init/user-data
      meta_data_file: cloud_init/meta-data

